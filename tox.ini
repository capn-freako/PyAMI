[tox]
envlist = py38, pylint, flake8, docs
skip_missing_interpreters = true

[testenv]
changedir = tests
conda_deps =
    Cython
    # chaco =5.0.0.2
    chaco =5.0.0
    empy
    matplotlib
    parsec =3.13
    pytest-cov
    scipy
    # PyQt5
conda_channels =
    dbanas
    defaults
conda_install_args =
    --use-local
commands =
    py.test --basetemp={envtmpdir} -vv --cov=pyibisami \
            --cov-report=html --cov-report=term-missing
# install_command = conda install --use-local -c dbanas -c defaults {packages}

[testenv:pylint]
deps =
    numpy
    Cython
    pylint
commands =
    pylint --rcfile={toxinidir}/tox.ini pyibisami

[testenv:flake8]
deps =
    numpy
    Cython
    flake8
commands =
    flake8 pyibisami

[testenv:docs]
deps =
    numpy
    Cython
	sphinx
    m2r
changedir = docs
commands =
    sphinx-build -j auto -b html source/ build/

[flake8]
; W503 line break before binary operator
ignore = W503
max-line-length = 119
max-complexity = 10
show-source = True
exclude = .tox, docs, venv

[MESSAGES CONTROL]
# C0330: Wrong hanging indentation before block (add 4 spaces), for black compatibility.
# C0103: Doesn't conform to snake_case naming style (invalid-name)
disable=C0330,C0103,R0913
max-line-length = 119
